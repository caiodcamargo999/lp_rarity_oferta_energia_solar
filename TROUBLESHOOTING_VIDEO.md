# üé¨ Troubleshooting do V√≠deo - Rarity Agency Landing Page

## üö® **Problema: V√≠deo n√£o funciona na vers√£o deployada**

### **üîç Diagn√≥stico R√°pido**

Se o v√≠deo n√£o est√° funcionando na vers√£o deployada, verifique:

1. **Console do Navegador** - Erros 403, 404 ou CORS
2. **Network Tab** - Falhas ao carregar o v√≠deo
3. **Vari√°veis de Ambiente** - Configura√ß√£o incorreta no Vercel

---

## üõ†Ô∏è **Solu√ß√µes por Ordem de Prioridade**

### **Solu√ß√£o 1: Configurar Cloudflare R2 (RECOMENDADO)**

#### **Passo a Passo:**

1. **Acesse o Cloudflare R2**
   ```
   https://www.cloudflare.com/products/r2/
   ```

2. **Crie uma conta gratuita**
   - Clique em "Get Started"
   - Complete o cadastro

3. **Ative R2 Object Storage**
   - No dashboard, v√° para "R2 Object Storage"
   - Clique em "Create bucket"

4. **Crie um novo bucket**
   - Nome: `rarity-videos`
   - Regi√£o: `S√£o Paulo` ou mais pr√≥xima
   - Clique em "Create bucket"

5. **Fa√ßa upload do v√≠deo**
   - Clique em "Upload"
   - Selecione `video-de-vendas.mp4`
   - Aguarde o upload completar

6. **Configure permiss√µes**
   - Clique no arquivo
   - Em "Settings", marque "Public"
   - Copie a URL p√∫blica

7. **Configure vari√°veis de ambiente**
   ```bash
   # No terminal do projeto
   vercel env add NEXT_PUBLIC_VIDEO_URL production [URL_DO_VIDEO_R2]
   vercel env add R2_ACCESS_KEY_ID production [SUA_ACCESS_KEY]
   vercel env add R2_SECRET_ACCESS_KEY production [SUA_SECRET_KEY]
   vercel env add R2_BUCKET_NAME production rarity-videos
   ```

8. **Redeploy**
   ```bash
   vercel --prod
   ```

---

### **Solu√ß√£o 2: Configura√ß√£o Manual no Dashboard**

1. **Acesse seu projeto no Vercel**
   ```
   https://vercel.com/dashboard/[seu-projeto]
   ```

2. **V√° para Settings > Environment Variables**

3. **Adicione as vari√°veis:**
   ```
   NEXT_PUBLIC_VIDEO_URL = [URL_DO_VIDEO_R2]
   R2_ACCESS_KEY_ID = [SUA_ACCESS_KEY]
   R2_SECRET_ACCESS_KEY = [SUA_SECRET_KEY]
   R2_BUCKET_NAME = rarity-videos
   ```

4. **Clique em "Save"**

5. **V√° para Deployments e clique em "Redeploy"**

---

## üîß **Verifica√ß√µes T√©cnicas**

### **1. Testar URL do V√≠deo**

```bash
# Teste se o v√≠deo est√° acess√≠vel
curl -I "[URL_DO_VIDEO_R2]"

# Deve retornar:
# HTTP/1.1 200
# Content-Type: video/mp4
# Accept-Ranges: bytes
```

### **2. Verificar Headers CORS**

```bash
# Teste headers CORS
curl -H "Origin: https://seu-site.vercel.app" \
     -H "Access-Control-Request-Method: GET" \
     -H "Access-Control-Request-Headers: Range" \
     -X OPTIONS \
     "[URL_DO_VIDEO_R2]"
```

### **3. Verificar API Proxy**

```bash
# Teste a API proxy localmente
curl -I "http://localhost:3000/api/video-proxy"

# Deve retornar:
# HTTP/1.1 200
# Content-Type: video/mp4
```

---

## üö´ **Problemas Comuns e Solu√ß√µes**

### **Erro 403 (Forbidden)**

**Causa:** Credenciais inv√°lidas ou bucket n√£o p√∫blico
**Solu√ß√£o:**
1. Verificar credenciais do Cloudflare R2
2. Verificar se o bucket est√° marcado como "Public"
3. Verificar permiss√µes do arquivo

### **Erro 404 (Not Found)**

**Causa:** Arquivo n√£o existe ou URL incorreta
**Solu√ß√£o:**
1. Verificar se o arquivo foi uploadado no R2
2. Copiar URL correta do dashboard do Cloudflare
3. Verificar se o nome do arquivo est√° correto

### **Erro CORS**

**Causa:** Headers CORS incorretos
**Solu√ß√£o:**
1. Verificar configura√ß√£o CORS no Cloudflare R2
2. Usar API proxy em vez de URL direta
3. Configurar headers corretos no vercel.json

### **V√≠deo n√£o carrega**

**Causa:** Formato n√£o suportado ou arquivo corrompido
**Solu√ß√£o:**
1. Verificar se o arquivo √© MP4 v√°lido
2. Converter para formato compat√≠vel (H.264)
3. Verificar tamanho do arquivo (m√°ximo 500MB)

---

## üì± **Testes em Diferentes Dispositivos**

### **Desktop (Chrome/Firefox/Safari)**
- ‚úÖ Suporte completo
- ‚úÖ Controles nativos
- ‚úÖ Fallbacks funcionais

### **Mobile (iOS/Android)**
- ‚ö†Ô∏è iOS: Pode precisar de `playsInline`
- ‚ö†Ô∏è Android: Pode precisar de `webkit-playsinline`
- ‚úÖ Fallbacks implementados

### **Tablet**
- ‚úÖ Suporte intermedi√°rio
- ‚úÖ Responsivo implementado

---

## üîç **Debugging Avan√ßado**

### **1. Logs do Console**

Abra o console do navegador e procure por:

```javascript
// Logs de sucesso
‚úÖ V√≠deo carregado com sucesso!
üé¨ V√≠deo pronto para reprodu√ß√£o!

// Logs de erro
‚ùå Erro ao carregar v√≠deo
‚ùå Falha ao iniciar v√≠deo
```

### **2. Network Tab**

No DevTools > Network:
- Procure por requisi√ß√µes para `/api/video-proxy`
- Verifique status das requisi√ß√µes
- Verifique se o v√≠deo est√° sendo carregado do Cloudflare R2

---

## üìã **Checklist de Verifica√ß√£o**

### **Configura√ß√£o do Cloudflare R2**
- [ ] Conta criada no Cloudflare
- [ ] Bucket "rarity-videos" criado
- [ ] V√≠deo uploadado e marcado como p√∫blico
- [ ] URL copiada corretamente

### **Vari√°veis de Ambiente no Vercel**
- [ ] NEXT_PUBLIC_VIDEO_URL configurada
- [ ] R2_ACCESS_KEY_ID configurada
- [ ] R2_SECRET_ACCESS_KEY configurada
- [ ] R2_BUCKET_NAME configurada

### **Deploy e Teste**
- [ ] Redeploy feito ap√≥s configurar vari√°veis
- [ ] V√≠deo testado em diferentes navegadores
- [ ] Console verificado para erros
- [ ] Network tab verificado para requisi√ß√µes

---

## üÜò **Suporte**

Se o problema persistir:

1. **Verifique os logs** no console do navegador
2. **Teste a URL** diretamente no navegador
3. **Verifique as vari√°veis** de ambiente no Vercel
4. **Consulte a documenta√ß√£o** do Cloudflare R2
5. **Entre em contato** com o suporte t√©cnico

---

**üí° Dica:** O Cloudflare R2 √© 10x mais barato que o Vercel Pro e oferece melhor performance global com CDN inclu√≠do.
